let num,btnElement=document.querySelector(".calculator__btn"),sumElement=document.querySelector("#sum"),deyElement=document.querySelector("#day"),monthElement=document.querySelector("#month"),yearElement=document.querySelector("#year"),rankElement=document.querySelector("#rank"),cashbackElement=document.querySelector("#cashback"),bonusesElement=document.querySelector("#bonuses"),termElement=document.querySelector("#term"),rank=e=>{e>=1e3&&e<2e3?(rankElement.innerHTML='<img src="img/icons/1.svg"> 1 ранг',cashbackElement.innerHTML="4%",bonusesElement.innerHTML='<img src="img/icons/castle.svg">',num=1):e>=2e3&&e<4e3?(rankElement.innerHTML='<img src="img/icons/2.svg"> 2 ранг',cashbackElement.innerHTML="4,5%",bonusesElement.innerHTML='<img src="img/icons/castle.svg">',num=2):e>=4e3&&e<8e3?(rankElement.innerHTML='<img src="img/icons/3.svg"> 3 ранг',cashbackElement.innerHTML="6,5%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">',num=3):e>=8e3&&e<15e3?(rankElement.innerHTML='<img src="img/icons/4.svg"> 4 ранг',cashbackElement.innerHTML="7%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">',num=4):e>=15e3&&e<3e4?(rankElement.innerHTML='<img src="img/icons/5.svg"> 5 ранг',cashbackElement.innerHTML="9%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">  <img src="img/icons/vip.svg">',num=5):e>=3e4&&e<6e4?(rankElement.innerHTML='<img src="img/icons/6.svg"> 6 ранг',cashbackElement.innerHTML="9,5%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">  <img src="img/icons/vip.svg">',num=6):e>=6e3&&e<1e4?(rankElement.innerHTML='<img src="img/icons/7.svg"> 7 ранг',cashbackElement.innerHTML="12,5%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">  <img src="img/icons/vip.svg"> <img src="img/icons/pr.svg">',num=7):e>=1e4&&e<15e3?(rankElement.innerHTML='<img src="img/icons/8.svg"> 8 ранг',cashbackElement.innerHTML="13%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">  <img src="img/icons/vip.svg"> <img src="img/icons/pr.svg">',num=8):e>=15e3&&e<2e4?(rankElement.innerHTML='<img src="img/icons/9.svg"> 9 ранг',cashbackElement.innerHTML="17,5%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">  <img src="img/icons/vip.svg"> <img src="img/icons/pr.svg">',num=9):e>=2e4&&(rankElement.innerHTML='<img src="img/icons/10.svg"> 10 ранг',cashbackElement.innerHTML="20%",bonusesElement.innerHTML='<img src="img/icons/castle.svg"> <img src="img/icons/tel.svg">  <img src="img/icons/vip.svg"> <img src="img/icons/pr.svg">',num=10)},getDates=()=>{let e=deyElement.value,t=monthElement.value,s=yearElement.value,n=new Date(s,t,e);n.setDate(n.getDate()+56);let i=[l(n.getDate()),l(n.getMonth()+1),n.getFullYear()].join(".");function l(e){return+e<10?"0"+e:e}termElement.innerHTML=`Максимальны доступный кебек будет получен <b>${i}</b> на <b>${num} уровне </b>`};btnElement.addEventListener("click",()=>{rank(sumElement.value),getDates()});let selects=document.getElementsByTagName("select");function selects_init(){for(let e=0;e<selects.length;e++){select_init(selects[e])}document.addEventListener("click",(function(e){selects_close(e)})),document.addEventListener("keydown",(function(e){27==e.which&&selects_close(e)}))}function selects_close(e){const t=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(let e=0;e<t.length;e++){const s=t[e],n=s.querySelector(".select__options");s.classList.remove("_active"),_slideUp(n,100)}}function select_init(e){const t=e.parentElement,s=e.getAttribute("class"),n=e.querySelector("option:checked");e.setAttribute("data-default",n.value),e.style.display="none",t.insertAdjacentHTML("beforeend",'<div class="select select_'+s+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),select_item(e)}function select_item(e){const t=e.parentElement,s=t.querySelector(".select__item"),n=e.querySelectorAll("option"),i=e.querySelector("option:checked").text,l=e.getAttribute("data-type");s&&s.remove();let o="";o="input"==l?'<div class="select__value"><input autocomplete="off" type="text" name="form[]" value="'+i+'" data-error="Ошибка" data-value="'+i+'" class="select__input"></div>':'<div class="select__value"><span>'+i+"</span></div>",t.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+o+'</div><div class="select__options">'+select_get_options(n)+"</div></div></div>"),select_actions(e,t)}function select_actions(e,t){const s=t.querySelector(".select__item"),n=t.querySelector(".select__options"),i=t.querySelectorAll(".select__option"),l=e.getAttribute("data-type"),o=t.querySelector(".select__input");s.addEventListener("click",(function(){let e=document.querySelectorAll(".select");for(let t=0;t<e.length;t++){const n=e[t],i=n.querySelector(".select__options");n!=s.closest(".select")&&(n.classList.remove("_active"),_slideUp(i,100))}_slideToggle(n,100),t.classList.toggle("_active")}));for(let s=0;s<i.length;s++){const n=i[s],r=n.getAttribute("data-value"),c=n.innerHTML;"input"==l?o.addEventListener("keyup",select_search):n.getAttribute("data-value")==e.value&&(n.style.display="none"),n.addEventListener("click",(function(){for(let e=0;e<i.length;e++){i[e].style.display="block"}"input"==l?(o.value=c,e.value=r):(t.querySelector(".select__value").innerHTML="<span>"+c+"</span>",e.value=r,n.style.display="none")}))}}function select_get_options(e){if(e){let t="";for(let s=0;s<e.length;s++){const n=e[s],i=n.value;if(""!=i){t=t+'<div data-value="'+i+'" class="select__option">'+n.text+"</div>"}}return t}}function select_search(e){e.target.closest(".select ").querySelector(".select__options");let t=e.target.closest(".select ").querySelectorAll(".select__option"),s=e.target.value.toUpperCase();for(let e=0;e<t.length;e++){let n=t[e];(n.textContent||n.innerText).toUpperCase().indexOf(s)>-1?n.style.display="":n.style.display="none"}}function selects_update_all(){let e=document.querySelectorAll("select");if(e)for(let t=0;t<e.length;t++){select_item(e[t])}}selects.length>0&&selects_init();let _slideUp=(e,t=500)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideDown=(e,t=500)=>{e.style.removeProperty("display");let s=window.getComputedStyle(e).display;"none"===s&&(s="block"),e.style.display=s;let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideToggle=(e,t=500)=>{if(!e.classList.contains("_slide"))return e.classList.add("_slide"),"none"===window.getComputedStyle(e).display?_slideDown(e,t):_slideUp(e,t)};